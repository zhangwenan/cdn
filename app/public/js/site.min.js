! function (i) {
    var l = '<a href="/cdn/{{name}}/" class="package list-group-item" target="_blank"  onclick="_hmt.push([\'_trackEvent\', \'packages\', \'click\', \'{{name}}\'])"><div class="row"><div class="col-md-3"><h4 class="package-name">{{name}}</h4></div><div class="col-md-9 hidden-xs"><p class="package-description">{{description}}</p></div><div class="package-extra-info col-md-9 col-md-offset-3 col-xs-12"><span><i class="fa fa-star"></i> {{stars}}</span></div></div></a>',
        o = [];
    0 < i(".search").length && i.get("/cdn/assets/json/index.libs.json?" + build).done(function (t) {
        o = t
    }), i(".search").val("").focus(), i(".search").on("input propertychange", _.throttle(function (t) {
        var e = i(t.currentTarget).val();
        if (console.log(e), 0 < e.length) {
            i("#common-packages").hide();
            var a = _.filter(o, function (t) {
                return new RegExp(e, "i").test(t[0])
            });
            e.length < 2 && (a = _.slice(a, 0, 100));
            var s = a.reduce(function (t, e) {
                return t.push(l.replace(/{{name}}/g, _.escape(e[0])).replace(/{{description}}/g, _.escape(e[1])).replace(/{{stars}}/g, _.escape(e[2]))), t
            }, []).join("");
            i("#search-results").html(s).show()
        } else i("#common-packages").show(), i("#search-results").hide()
    }, 60)), i(document).on("input", ".clearable", function () {
        this.value ? i(this).next("i").removeClass("fa-search").addClass("fa-close x") : i(this).next("i").removeClass("fa-close").addClass("fa-search")
    }).on("mousemove", ".x", function (t) {
        i(this).addClass("onX")
    }).on("click", ".onX", function () {
        i(this).removeClass("x onX").prev("input").val("").change(), i(this).removeClass("fa-close").addClass("fa-search"), i("#common-packages").show(), i("#search-results").hide()
    }), i(window).scroll(function () {
        100 < i(this).scrollTop() ? i("#back-to-top").fadeIn() : i("#back-to-top").fadeOut()
    }), i("#back-to-top").on("click", function (t) {
        return t.preventDefault(), i("html, body").animate({
            scrollTop: 0
        }, 100), !1
    });
    try {
        if ("/" !== window.location.pathname) {
            var t = i(".site-header h1").first().text();
            i(".site-header").geopattern(t)
        }
    } catch (t) {
        console.log(t)
    }
    i(".btn-group .btn").click(function () {
        var t = i("input", this).attr("id");
        console.log("Protocal ", t, " was selected"), "relative" === t ? i(".library-url").each(function () {
            var t = i(this).text();
            i(this).text(t.replace(/^https?:/i, "")), i(this).parent().removeClass("js-https")
        }) : "http" === t ? i(".library-url").each(function () {
            var t = i(this).text();
            i(this).text("http:" + t.replace(/^https?:/i, "")), i(this).parent().removeClass("js-https")
        }) : "https" === t && i(".library-url").each(function () {
            var t = i(this).text();
            i(this).text("https:" + t.replace(/^https?:/i, "")), i(this).parent().addClass("js-https")
        }), localforage.setItem("protocal", t, function (t, e) {
            if (t) return console.log(t);
            console.log("saved protocal: ", e)
        })
    })
}(jQuery), $(function () {
    $(".library-url").each(function () {
        var t = $(this).text();
        /\.css$/.test(t) ? $(this).before('<div class="zero-clipboard"><span class="btn-clipboard btn-clipboard-code" title="复制到剪贴板"><i class="fa fa-code"></i> 复制 &lt;link&gt; 标签</span><span class="btn-clipboard btn-clipboard-link" title="复制到剪贴板"><i class="fa fa-link"></i> 复制链接</span></div>') : /\.js$/.test(t) ? $(this).before('<div class="zero-clipboard"><span class="btn-clipboard btn-clipboard-code" title="复制到剪贴板"><i class="fa fa-code"></i> 复制 &lt;script&gt; 标签</span><span class="btn-clipboard btn-clipboard-link" title="复制到剪贴板"><i class="fa fa-link"></i> 复制链接</span></div>') : $(this).before('<div class="zero-clipboard"><span class="btn-clipboard btn-clipboard-link" title="复制到剪贴板"><i class="fa fa-link"></i> 复制链接</span></div>')
    }), $(".btn-clipboard").tooltip({
        container: "body"
    });
    var t = new Clipboard(".btn-clipboard", {
        text: function (t) {
            var e = $(t),
                a = $(t.parentNode.nextElementSibling),
                s = url = a.text();
            return e.hasClass("btn-clipboard-code") && (/\.css$/.test(url) ? s = '<link href="' + url + '" rel="stylesheet">' : /\.js$/.test(url) && (s = '<script src="' + url + '"><\/script>')), s
        }
    });
    t.on("success", function (t) {
        $(t.trigger).attr("title", "已复制！").tooltip("fixTitle").tooltip("show").attr("title", "复制到剪贴板").tooltip("fixTitle"), t.clearSelection()
    }), t.on("error", function (t) {
        var e = "Press " + (/Mac/i.test(navigator.userAgent) ? "⌘" : "Ctrl-") + "C to copy";
        $(t.trigger).attr("title", e).tooltip("fixTitle").tooltip("show").attr("title", "复制到剪贴板").tooltip("fixTitle")
    })
});